[Главная](../../#readme) / [Порождающие шаблоны](../#readme) / Фабричный метод

# Фабричный метод (Factory Method)

## Другие названия 

* **Виртуальный конструктор** (Virtual Constructor)

## Абстрактная ситуация. Машины и моторы

Вы производите на заводе три вида машин: `Маленькую`, `Среднюю` и `Большую`. Они очень похожи, но для работы им нужны разные моторы. В каком месте класса Машины нужно указать, какой мотор ей нужен? Если возникает подобный вопрос, вам точно нужен порождающий паттерн.

Лучше, если создание мотора нужного типа будет вынесено в отдельный метод. Тогда вы легко сможете переопределить его у любого класса машины.

## Структура паттерна

Фабричный метод выносится на самый верх иерархии классов (в родительский или абстрактный класс). То есть у класса есть некоторый метод, который производит объект, который нужен классу - **Фабричный метод**. Этот метод может быть абстрактным, чтобы каждый дочерний класс дал собственную реализацию или иметь некоторое дефолтное поведение (например, возвращать самый простой мотор).

**Конкретная реализация фабричного метода предоставляется дочерними классами**. Таким образом, каждый дочерний класс сам решает, какой именно объект создавать. `МаленькаяМашина` создает себе `МаленькийМотор`, а `БольшаяМашина` - `БольшойМотор`. При этом вся логика по выбору и созданию мотора находится в одном месте - в фабричном методе.

## Реализация паттерна

![Схема паттерна Фабричный метод](./scheme/scheme.png)

* Родительский класс `Creator` определяет фабричный метод для создания объекта `FactoryMethod()`.
* Конкретные создатели `ConcreteCreator` реализуют этот метод по-своему.
* Порождаемые классы (продукты) тоже объединяются в отдельную иерархию, ведь они являются родственными и должны иметь одинаковый интерфейс. Класс `Product` предоставляет общий интерфейс продукта.
* Классы `ConcreteProduct` определяют конкретные продукты.
* Каждый КонкретныйСоздатель в своей реализации ФабричногоМетода создает тот КонкретныйПродукт, который ему нужен.

## Примеры

* [Фабрика пиццы](./pizza#readme)

## Похожие шаблоны

* [Строитель (Builder)](../builder#readme) - фабрика с более тонкой настройкой
* [Абстрактная фабрика (Abstract Factory)](../abstractFactory#readme) - фабрика фабрик

## Взаимодействие с другими шаблонами

* [Приспособленец (Flyweight)](../../structural/flyweight#readme) - Позволяет повторно использовать уже существующие объекты, а не создавать их заново.
