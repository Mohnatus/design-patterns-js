[Порождающие шаблоны](../#readme) / Одиночка

# Одиночка

## Другие названия

* **Синглтон** (Singleton)

## Содержание

* [Описание паттерна](#-описание-паттерна)
* [Реализация паттерна](#-реализация-паттерна)
* [Примеры](#-примеры)
* [Использование](#-использование)
* [Преимущества](#-преимущества)
* [Недостатки](#-недостатки)
* [Похожие паттерны](#-похожие-паттерны)
* [Взаимодействие с другими паттернами](#-взаимодействие-с-другими-паттернами)
* [Источники](#источники)

## ![](../../ui/info.svg) Описание паттерна

Дает гарантию что в программе будет создан **ТОЛЬКО ОДИН** экземпляр класса (независимо от того, где происходит его вызов и попытка инициализации).

Другими словами, паттерн _ограничивает инстанцирование класса._

Синглтон - это некоторое глобальное состояние системы. Он может стать причиной сильной связи между элементами.

## ![](../../ui/gear.svg) Реализация паттерна

![Схема паттерна Одиночка](./scheme/scheme.png)

Реализаций может быть несколько:

* глобальная переменная
* приватный конструктор класса
* шаблон Модуль

Для JavaScript особенно актуален последний вариант (создание замыкания).

## ![](../../ui/code.svg) Примеры

* [Президент страны](./president#readme)
* Корзина товаров на сайте интернет-магазина. Вы не можете допустить повторного создания корзины, так как при этом могут быть потеряны имеющиеся данные клиента.
* Всплывающее окно авторизации. Независимо из какого места вашего приложения и по какой причине вызывается попап авторизации, вы, вероятно, хотите, чтобы это было одно и то же окно, а не два разных.
* Доступ к базе данных, доступный всем клиентам программы.

## ![](../../ui/question.svg) Использование

* Если некоторый объект должен быть в программе в единственном экземпляре по каким-то причинам.
* Требуется больший контроль над глобальными переменными.

## ![](../../ui/good.svg) Преимущества

* Гарантирует наличие единственного экземпляра класса.
* Предоставляет к нему глобальную точку доступа.
* Реализует отложенную инициализацию объекта-одиночки.

## ![](../../ui/bad.svg) Недостатки

* Нарушает принцип единственной ответственности класса.
* Маскирует плохой дизайн.
* Проблемы мультипоточности.
* Требует постоянного создания Mock-объектов при юнит-тестировании.

## ![](../../ui/interaction.svg) Взаимодействие с другими паттернами

* Частое применение (паттерны не связаны напрямую)
  * [Абстрактная фабрика (Abstract factory)](../abstractFactory#readme), [Строитель (Builder)](../builder#readme), [Прототип (Prototype)](../prototype#readme), [Фасад (Facade)](../../structural/facade#readme). Могут быть реализованы как `Одиночки`.

## Источники

* [refactoring.guru](https://refactoring.guru/ru/design-patterns/singleton)
