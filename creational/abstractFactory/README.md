# Абстрактная фабрика

## Что делает?

Создает целые семейства взаимосвязанных объектов.

## Суть

Нужно создавать комбинации из нескольких типов объектов. За каждую такую комбинацию отвечает отдельная фабрика. Она работает с конкретными объектами каждого типа. 

Абстрактная фабрика позволяет координировать работу таких отдельных (конкретных) фабрик, обеспечивает для них одинаковый интерфейс, контролирует набор типов объектов, которые нужно создать.

## Схема паттерна

* Интерфейс абстрактной фабрики AbstractFactory, который объявляет методы создания каждой из нужных групп объектов (CreateProductA, CreateProductB).
* Классы конкретных фабрик (ConcreteFactory1, ConcreteFactory2), которые реализуют методы создания каждой из нужных групп объектов. 
* Каждая конкретная фабрика САМА определяет, как и какой именно объект ей создавать.
* Для каждой группы объектов создаются свои деревья наследования. Это позволяет сохранить одинаковый интерфейс для разных объектов одной группы.

## Пример из жизни

Пицца.

Каждая пицца условно состоит из нескольких типов ингредиентов:
* какое-то мясо (бекон, колбаса, курочка, сосиски, рыба)
* какой-то сыр (моцарелла, пармезан, чеддер, веганский)
* какой-то соус (томатный, горчичный, сырный, фирменный)
* какое-то дополнение (помидоры, маслины, грибы, ананасы)

Например, пицца Пепперони выглядит так:
* мясо - колбаса пепперони
* сыр - моцарелла
* соус - фирменный
* дополнение - нет

А вот пицца Грибное ассорти:
* мясо - нет
* сыр - веганский
* соус - горчичный
* дополнение - грибы

Каждую группу продуктов можно представить в виде отдельного абстрактного класса (или интерфейса), от которого наследуют конкретные продукты.

* Абстрактный класс Мясо
  * Класс Пепперони
  * Класс Сосиска
  * Класс Бекон
* Абстрактный класс Дополнение
  * Класс Маслины
  * Класс Грибы
  * Класс Ананасы

Реализация единого интерфейса облегчает работу с продуктами каждой группы, ведь к Пепперони и Сосиске при необходимости можно обратиться сходным образом.

Каждую конкретную пиццу создает конкретная фабрика (Фабрика Пепперони, Фабрика ГрибноеАссорти). Необходимо проконтролироватЬ, чтобы каждая из этих фабрик набрала все необходимые для пиццы типы продуктов. Для этого создается Абстрактная фабрика (интерфейс или абстрактный класс).

Абстрактная фабрика объявляет методы СоздатьМясо(), СоздатьСыр(), СоздатьСоус(), СоздатьДополнение(). Но конкретную реализацию она оставляет для конкретных фабрик. Таким образом, фабрика Пепперони, наследующая от АбстрактноПиццаФабрики, не забудет создать мясо для пиццы, но право выбора этого мяса остается за ней.

## Похожие шаблоны

* [Строитель](../builder)
* [Фабричный метод](../factoryMethod)