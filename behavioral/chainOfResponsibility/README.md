# Цепочка обязанностей

## Команда для запуска кода

```
npm run chainOfResponsibility
```

## Что делает?

Формирует цепочку из обработчиков запроса, в которой каждый обработчик может что-либо сделать или не сделать с сообщением, но обязательно передает его следующему обработчику.

Получается черный ящик, в который поступает запрос, а возвращается обработанный ответ.

## Зачем нужен?

Разделяет отправителя запроса и его получателя, помогая избежать их зависимости. Разделяет запрос и его обработчик.

Обеспечивает конвейерную обработку запроса.

Полезен, если запросов много, а обработчики у них могут быть разные (или одни и те же).

Упрощает структуру программы: каждый объект хранит всего одну ссылку на следующий элемент цепочки.

## Важно!

Убедитесь, что все некорректно обработанные запросы отлавливаются.

## Пример из жизни

Выдача денег в банкомате. Запрос последовательно передается счетчикам купюр разного достоинства:

* 5000 руб
* 1000 руб
* 500 руб
* 100 руб
* 50 руб

Клиент запрашивает 1350 рублей и это сообщение передается в начало цепочки. Счетчик с купюрами в 5000 руб просто передаст его дальше в неизмененном виде. Следующий (1000 руб) обработает, даст одну купюру и отправит дальше запрос с уменьшенной на 1000 суммой (350 руб). Счетчик 500-рублевых купюр лишь передает запрос дальше, зато следующий (100 руб) отсчитывает сразу три купюры. Для последнего обработчика остается всего 50 руб, которые он и отдает клиенту.

## Взаимодействие с другими шаблонами

* [Компоновщик (Composite)](../../structural/composite). Родитель компонента может быть его преемником в цепочке.

## Родственные шаблоны

* [Команда (Command)](../command) 
* [Посредник (Mediator)](../mediator)
* [Наблюдатель (Observer)](../observer)

Эти паттерны позволяют отделить отправителя и получателя запроса.
